{"@t":"2025-02-12T20:58:23.7238064Z","@mt":"Actualizando Giro Comercial","@l":"Error","@x":"System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)\r\n   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)\r\n   at lambda_method34(Closure, QueryContext)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)\r\n   at PadronProveedoresAPI.Data.Repository.Entities.CatGiroComercialRepository.ActualizarGiroComercial(CatGiroComercialModel giroComercial) in C:\\Users\\gonzalo.nava\\Desktop\\actividades\\padron de proveedores\\BackEnd\\PadronProveedoresBack\\Data\\Repository\\Entities\\CatGiroComercialRepository.cs:line 94","@tr":"617223dec611078d4b260e6b32e6f103","@sp":"161f2f1ed1a455a4","Usuario":"usuario","Giro Comercial":"PadronProveedoresAPI.Models.Entities.CatGiroComercialModel","Archivo":"CatGiroComercialRepository","RequestBody":"{\n  \"idGiroComercial\": 45,\n  \"giroComercial\": \"a veeeer\"\n}","ActionId":"004abde7-afec-4b14-abd5-02924b3b92e6","ActionName":"PadronProveedoresAPI.Controllers.Entities.CatGiroComercialController.ActualizarGiroComercial (PadronProveedoresAPI)","RequestId":"0HNABKV8I7GF5:00000001","RequestPath":"/api/CatGiroComercial/45","ConnectionId":"0HNABKV8I7GF5"}
{"@t":"2025-02-12T20:58:42.2126793Z","@mt":"Error no controlado en la aplicación","@l":"Error","@x":"System.Exception: Ocurrió un error interno.\r\n ---> System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)\r\n   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)\r\n   at lambda_method34(Closure, QueryContext)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)\r\n   at PadronProveedoresAPI.Data.Repository.Entities.CatGiroComercialRepository.ActualizarGiroComercial(CatGiroComercialModel giroComercial) in C:\\Users\\gonzalo.nava\\Desktop\\actividades\\padron de proveedores\\BackEnd\\PadronProveedoresBack\\Data\\Repository\\Entities\\CatGiroComercialRepository.cs:line 94\r\n   --- End of inner exception stack trace ---\r\n   at PadronProveedoresAPI.Data.Repository.Entities.CatGiroComercialRepository.ActualizarGiroComercial(CatGiroComercialModel giroComercial) in C:\\Users\\gonzalo.nava\\Desktop\\actividades\\padron de proveedores\\BackEnd\\PadronProveedoresBack\\Data\\Repository\\Entities\\CatGiroComercialRepository.cs:line 113\r\n   at PadronProveedoresAPI.Services.Entities.CatGiroComercialService.ActualizarGiroComercial(CatGiroComercialModel giroComercial) in C:\\Users\\gonzalo.nava\\Desktop\\actividades\\padron de proveedores\\BackEnd\\PadronProveedoresBack\\Services\\Entities\\CatGiroComercialService.cs:line 32\r\n   at PadronProveedoresAPI.Controllers.Entities.CatGiroComercialController.ActualizarGiroComercial(Int32 idGiroComercial, CatGiroComercialModel giroComercial) in C:\\Users\\gonzalo.nava\\Desktop\\actividades\\padron de proveedores\\BackEnd\\PadronProveedoresBack\\Controllers\\Entities\\CatGiroComercialController.cs:line 41\r\n   at lambda_method3(Closure, Object, Object[])\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at PadronProveedoresAPI.MiddleWare.Logs.ErrorHandleMiddleware.InvokeAsync(HttpContext context) in C:\\Users\\gonzalo.nava\\Desktop\\actividades\\padron de proveedores\\BackEnd\\PadronProveedoresBack\\MiddleWare\\Logs\\ErrorHandleMiddleware.cs:line 28","@tr":"617223dec611078d4b260e6b32e6f103","@sp":"161f2f1ed1a455a4","RequestId":"0HNABKV8I7GF5:00000001","RequestPath":"/api/CatGiroComercial/45","ConnectionId":"0HNABKV8I7GF5"}
